text = input("Введите текст для шифрования")
k = int(input("Ключ"))
mode = input("Шифрование или Дешифрование")

dictionary = "абвгдеёжзийклмнопрстуфхцчшщъыьэюя"
dictionary_upper = "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ"


def ceaser_cipher(text, k, mode):
    res, n = [],''

    if mode == 'Дешифрование':
        key = -k
    elif mode == 'Шифрование':
        key = k


    for i in range(len(text)):
        if text[i] in dictionary:
            n = dictionary
        elif text[i] in dictionary_upper:
            n = dictionary_upper
        else:
            res.append(text[i])

        if text[i] in n:
            for j in range(len(n)):
                if 0 <= j + key < len(n) and text[i] == n[j]:
                    res.append(n[j + key])
                elif j + key >= len(n) and text[i] == n[j]:
                    res.append(n[(1 - j - key) % (len(n) - 1)])
                elif j + key < 0 and text[i] == n[j]:
                    res.append(n[(j + key) % len(n)])

    return ''.join(res)

print(ceaser_cipher(text, k, mode))
